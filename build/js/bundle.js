!function o(c,l,i){function u(t,e){if(!l[t]){if(!c[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(s)return s(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var a=l[t]={exports:{}};c[t][0].call(a.exports,function(e){return u(c[t][1][e]||e)},a,a.exports,o,c,l,i)}return l[t].exports}for(var s="function"==typeof require&&require,e=0;e<i.length;e++)u(i[e]);return u}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CLASSNAMES=void 0;r.CLASSNAMES={inputs:"form-field"}},{}],2:[function(e,t,r){"use strict";var c=e("./constants");function m(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)r=a[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}var p={ProjectPrice:{label:"Стоимость проекта, ₽",placeholder:0,type:"range",required:!0,min:1e6,max:5e7,value:84e5,step:1e3},FiredEmployees:{label:"Количество высвобождаемых работников, чел",placeholder:0,type:"range",min:1,max:20,required:!0,value:4},Robots:{label:"Количество роботов в проекте",placeholder:0,type:"range",min:1,max:5,required:!0,value:1},Performance:{label:"Ожидаемый прирост производительности, %",placeholder:0,type:"range",required:!0,min:0,max:100,value:0},Shifts:{label:"Количество смен в сутки (по 8 часов), шт.",placeholder:0,type:"range",required:!0,min:0,max:3,value:2},WorkingDays:{label:"Количество рабочих дней в неделю, шт.",placeholder:0,type:"range",required:!0,min:1,max:7,value:7},CostsPerPerson:{label:"Затраты на человека на линии в год (с учетом налогов), ₽/год",placeholder:0,type:"range",required:!0,min:42e4,max:15e5,value:561168,step:1e3},Savings:{label:"Дополнительная экономия (защитные костюмы, аттестации и пр.), ₽/год",placeholder:0,type:"range",required:!0,min:1e4,max:1e5,value:1e4,step:1e3}};function d(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}var v=document.querySelector(".form");Object.keys(p).map(function(e){var t=p[e],r=(t.initialValue,l(t,["initialValue"])),n=Object.keys(r).reduce(function(e,t){return e+"".concat(t,'="').concat(r[t],'"')},"")+'class="'.concat(c.CLASSNAMES.inputs,'" name="').concat(e,'"'),a=r.label,o=d('<label class="form--label" for="'.concat(e,'">').concat(a,"</label>"));return{item:e,element:d("<input ".concat(n," /><br />")),label:o,output:d('<output class="bubble bubble--'.concat(e,'"></output>')),scale:d('<div class="form--minmax"><span>'.concat(r.min.toLocaleString("ru"),"</span><span>").concat(r.max.toLocaleString("ru"),"</span></div>"))}}).forEach(function(e){v.append(d("<div class= 'form--item form--item-".concat(e.item,"'></div>")));var t=document.querySelector(".form--item-".concat(e.item));t.append(e.label),t.append(d("<div class= 'form--scale form--scale-".concat(e.item,"'></div>")));var r=document.querySelector(".form--scale-".concat(e.item));r.append(e.element),r.append(e.output),r.append(e.scale)});v.addEventListener("submit",function(e){e.preventDefault();var t,r,n,a,o,c,l,i,u,s=Array.from(v.elements).reduce(function(e,t){return"INPUT"===t.tagName&&(e[t.name]=t.value),e},{}),f=(t=s,r={},Object.keys(t).forEach(function(e){p[e].required&&!t[e]&&(r[e]="Пожалуйста, заполните поле")}),r);Object.keys(f).length?console.log(f):(n=function(r){for(var e=Object.keys(r).reduce(function(e,t){return e[t]=parseFloat(r[t]),e},{}),t=e.ProjectPrice,n=e.FiredEmployees,a=e.Robots,o=e.Performance,c=e.Shifts,l=e.WorkingDays,i=e.CostsPerPerson,u=e.Savings,s=[],f=1;f<=20;f++){var m=1+.05*(f-1),p={};p.year=f,p.maintenance=f%5==0?36e4:12e4,p.operational=5*a*.9*m*c*l*4.5*8*50,1===f?(p.salarySaved=n*i*m-i*(n/5),p.investments=t):(p.investments=0,p.salarySaved=n*i*m-i*(n/5)*m),p.performanceSaved=p.salarySaved*(o/100),p.otherSaved=u,1===f?(p.cashflowYear=p.salarySaved+p.performanceSaved+p.otherSaved-t-p.maintenance-p.operational,p.cashflow=p.cashflowYear):(p.cashflowYear=p.salarySaved+p.performanceSaved+p.otherSaved-p.maintenance-p.operational,p.cashflow=p.cashflowYear+s[f-2].cashflow),s.push(p)}return s}(s),a=d('<section class="result">'.concat(function(e){var t,r=['<table id="resultTable"><tr><th>Год</th><th>Ежегодный кэш-флоу,&nbsp;₽</th><th>Суммарный кэш-флоу,&nbsp;₽</th><th>Вложения,&nbsp;₽</th><th>Обслуживание,&nbsp;₽</th><th>Операционные расходы,&nbsp;₽</th><th>Экономия ФОТ,&nbsp;₽</th><th>Экономия от увеличения производительности,&nbsp;₽</th></tr>'],n=m(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=a.year,c=a.investments,l=a.maintenance,i=a.operational,u=a.salarySaved,s=a.performanceSaved,f=[o,a.cashflowYear,a.cashflow,c,l,i,u,s].map(function(e){return"<td>".concat(e.toLocaleString("ru"),"</td>")}).join("");r.push("<tr>".concat(f,"</tr>"))}}catch(e){n.e(e)}finally{n.f()}return r.push("</table>"),r.join("")}(n),"</section>")),o=d('<p class="payback">'.concat(y(n),"</p>")),(c=document.getElementById("resultTable"))&&c.remove(),(l=document.getElementById("paybackText"))&&l.remove(),(i=document.body.querySelector(".container")).append(o),i.append(a),document.querySelector(".result"),u=document.querySelector(".information"),i.append(u),u.style.display="block",u.scrollIntoView())},!0);var y=function(e){var t,r=0,n=e.find(function(e){return 0<e.cashflow})||null;if(null===n)return"Проект не окупается";for(var a=0<(t=n.year-1)?e[t-1]:e[0],o=a.salarySaved,c=a.performanceSaved,l=a.otherSaved,i=a.maintenance,u=a.operational,s=a.investments,f=o+c+l,m=i+u,p=0<t?a.cashflow:-s;p<0;)p+=(f-m)/12,r+=1;return 12===r&&(r=0,t+=1),function(e,t){var r="Срок окупаемости&nbsp;– ",n=!(4<e%100&&e%100<=20)&&e%10<5?e%10-1:4;r+=0!==e?"".concat(e,"&nbsp;").concat(["год","года","года","года","лет"][n]," "):"";var a=!(4<t%100&&t%100<=20)&&t%10<5?t%10-1:4;return r+=0!==t?"".concat(t,"&nbsp;").concat(["месяц","месяца","месяца","месяца","месяцев"][a]):""}(t,r)};function n(e,t){var r=~~e.value,n=e.min,a=e.max,o=Number(100*(r-n)/(a-n));t.innerHTML=r.toLocaleString("ru"),t.style.left="calc(".concat(o,"% + (").concat(10-.15*o,"px))")}document.querySelectorAll(".form--item").forEach(function(e){var t=e.querySelector(".form-field"),r=e.querySelector(".bubble");t.addEventListener("input",function(){n(t,r)}),n(t,r)});var a=document.querySelector(".information--btn"),o=document.querySelector(".information--text");a.addEventListener("click",function(){o.classList.toggle("is-visible")})},{"./constants":1}]},{},[2]);
//# sourceMappingURL=bundle.js.map
