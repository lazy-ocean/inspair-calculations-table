!function o(c,l,u){function s(a,e){if(!l[a]){if(!c[a]){var t="function"==typeof require&&require;if(!e&&t)return t(a,!0);if(i)return i(a,!0);var r=new Error("Cannot find module '"+a+"'");throw r.code="MODULE_NOT_FOUND",r}var n=l[a]={exports:{}};c[a][0].call(n.exports,function(e){return s(c[a][1][e]||e)},n,n.exports,o,c,l,u)}return l[a].exports}for(var i="function"==typeof require&&require,e=0;e<u.length;e++)s(u[e]);return s}({1:[function(e,a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculate=function(t){for(var e=Object.keys(t).reduce(function(e,a){return e[a]=parseFloat(t[a]),e},{}),a=e.ProjectPrice,r=e.FiredEmployees,n=e.Robots,o=e.Performance,c=e.Shifts,l=e.WorkingDays,u=e.CostsPerPerson,s=e.Savings,i=[],d=1;d<=20;d++){var f=1+.05*(d-1),p={};p.year=d,p.maintenance=d%5==0?36e4:12e4,p.operational=5*n*.9*f*c*l*4.5*12*50,1===d?(p.salarySaved=r*u*f-u*(r/5),p.investments=a):(p.investments=0,p.salarySaved=r*u*f-u*(r/5)*f),p.performanceSaved=p.salarySaved*(o/100),p.otherSaved=s,1===d?(p.cashflowYear=p.salarySaved+p.performanceSaved+p.otherSaved-a-p.maintenance-p.operational,p.cashflow=p.cashflowYear):(p.cashflowYear=p.salarySaved+p.performanceSaved+p.otherSaved-p.maintenance-p.operational,p.cashflow=p.cashflowYear+i[d-2].cashflow),i.push(p)}return i},t.calculatePayback=function(e){var a=e.find(function(e){return 0<e.cashflow})||null;if(null===a)return null;var t=a.year-1,r=e[Math.max(t-1,0)],n=r.salarySaved,o=r.performanceSaved,c=r.otherSaved,l=r.maintenance,u=r.operational,s=r.investments,i=n+o+c,d=l+u,f=0<t?r.cashflow:-s,p=(i-d)/12,m=Math.ceil(-f/p);12<=m&&(m-=12,t+=1);return{paybackYears:t,paybackMonths:m}};e("../utils")},{"../utils":9}],2:[function(e,a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(e("./schema")),n=c(e("./validate")),o=e("./calculate");function c(e){return e&&e.__esModule?e:{default:e}}var l={schema:r.default,validate:n.default,calculate:o.calculate,calculatePayback:o.calculatePayback};t.default=l},{"./calculate":1,"./schema":3,"./validate":4}],3:[function(e,a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={ProjectPrice:{label:"Project cost,&nbsp₽",placeholder:0,type:"range",required:!0,min:1e6,max:5e7,value:84e5,step:1e5},FiredEmployees:{label:"Dismissed employees",placeholder:0,type:"range",min:1,max:20,required:!0,value:4},Robots:{label:"Project robots",placeholder:0,type:"range",min:1,max:5,required:!0,value:1},Performance:{label:"Productive capacity increase,&nbsp%",placeholder:0,type:"range",required:!0,min:0,max:100,value:0},Shifts:{label:"Shifts&nbsp;per&nbsp;day (12&nbsp;hours)",placeholder:0,type:"range",required:!0,min:0,max:4,value:2},WorkingDays:{label:"Working days in&nbsp;a&nbsp;week",placeholder:0,type:"range",required:!0,min:1,max:7,value:7},CostsPerPerson:{label:"Costs per employee (including tax),&nbsp₽/year",placeholder:0,type:"range",required:!0,min:42e4,max:15e5,value:561168,step:1e3},Savings:{label:"Savings (working suits, trainings, etc),&nbsp;₽/year",placeholder:0,type:"range",required:!0,min:1e4,max:1e6,value:1e4,step:1e3}}},{}],4:[function(e,a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=e("./schema"))&&r.__esModule?r:{default:r};t.default=function(a){var t={};return Object.keys(a).forEach(function(e){n.default[e].required&&!a[e]&&(t[e]="Please fill down the fields")}),t}},{"./schema":3}],5:[function(e,a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLASSNAMES=void 0;t.CLASSNAMES={inputs:"form__field"}},{}],6:[function(e,a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=e("./constants"),r=n(e("./calculator")),p=n(e("./table")),m=e("./utils");function n(e){return e&&e.__esModule?e:{default:e}}function l(e,a){if(null==e)return{};var t,r=function(e,a){if(null==e)return{};var t,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],0<=a.indexOf(t)||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),o=0;o<n.length;o++)t=n[o],0<=a.indexOf(t)||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t]);return r}var u=r.default.schema,v=r.default.validate,b=r.default.calculate,y=r.default.calculatePayback;t.default=function(){function d(e){var a=document.createElement("div");return a.innerHTML=e.trim(),a.firstChild}var f=document.querySelector(".form");Object.keys(u).map(function(e){var a=u[e],t=(a.initialValue,l(a,["initialValue"])),r=Object.keys(t).reduce(function(e,a){return e+"".concat(a,'="').concat(t[a],'"')},"")+'class="'.concat(c.CLASSNAMES.inputs,'" name="').concat(e,'"'),n=t.label,o=d('<label class="form__label" for="'.concat(e,'">').concat(n,"</label>"));return{item:e,element:d("<input ".concat(r," /><br />")),label:o,output:d('<output class="form__bubble form__bubble--'.concat(e,'"></output>')),scale:d('<div class="form__minmax"><span>'.concat(t.min.toLocaleString("ru"),"</span><span>").concat(t.max.toLocaleString("ru"),"</span></div>"))}}).forEach(function(e){f.append(d("<div class= 'form__item form__item--".concat(e.item,"'></div>")));var a=document.querySelector(".form__item--".concat(e.item));a.append(e.label),a.append(d("<div class= 'form__scale form__scale--".concat(e.item,"'></div>")));var t=document.querySelector(".form__scale--".concat(e.item));t.append(e.element),t.append(e.output),t.append(e.scale)});function r(e,a){var t=~~e.value,r=e.min,n=e.max,o=Number(100*(t-r)/(n-r));a.innerHTML=t.toLocaleString("ru"),a.style.left="calc(".concat(o,"% + (").concat(10-.15*o,"px))")}f.addEventListener("submit",function(e){e.preventDefault();var a,t,r,n,o,c,l,u,s=Array.from(f.elements).reduce(function(e,a){return"INPUT"===a.tagName&&(e[a.name]=a.value),e},{}),i=v(s);Object.keys(i).length?console.log(i):(a=b(s),t=y(a),r=d('<p class="payback">'.concat(t?"Payback period&nbsp;– ".concat((0,m.formatChunkTimestamp)(t.paybackYears,"years")," ").concat((0,m.formatChunkTimestamp)(t.paybackMonths,"months")):"Payback period is more than 20&nbsp;years. Please try other parameters","</p>")),n=d('<section class="result">'.concat((0,p.default)(a,t?t.paybackYears-(0===t.paybackMonths?1:0):null),"</section>")),(o=document.querySelector(".result"))&&o.remove(),(c=document.querySelector(".payback"))&&c.remove(),(l=document.body.querySelector(".container")).append(r),l.append(n),document.querySelector(".result"),u=document.querySelector(".information"),l.append(u),u.classList.add("is-visible"),r.scrollIntoView())},!0),document.querySelectorAll(".form__item").forEach(function(e){var a=e.querySelector(".form__field"),t=e.querySelector(".form__bubble");a.addEventListener("input",function(){r(a,t)}),r(a,t)})}},{"./calculator":2,"./constants":5,"./table":8,"./utils":9}],7:[function(e,a,t){"use strict";var r;(0,((r=e("./form"))&&r.__esModule?r:{default:r}).default)();var n=document.querySelector(".information__btn"),o=document.querySelector(".information__text");n.addEventListener("click",function(){o.classList.toggle("is-visible")})},{"./form":6}],8:[function(e,a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,a){for(var t=['<table id="resultTable"><tr><th>Year</th><th>Annual cash flow,&nbsp;₽</th><th>Total cash flow,&nbsp;₽</th><th>Investments,&nbsp;₽</th><th>Maintenance,&nbsp;₽</th><th>Operational costs,&nbsp;₽</th><th>Salary savings,&nbsp;₽</th><th>Performance savings,&nbsp;₽</th></tr>'],r=0;r<e.length;r++){var n=e[r],o=n.year,c=n.investments,l=n.maintenance,u=n.operational,s=n.salarySaved,i=n.performanceSaved,d=[o,n.cashflowYear,n.cashflow,c,l,u,s,i].map(function(e){return"<td>".concat(e.toLocaleString("ru"),"</td>")}).join("");t.push("<tr class=".concat(r===a?"isHighlighted":"",">").concat(d,"</tr>"))}return t.push("</table>"),t.join("")}},{}],9:[function(e,a,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatChunkTimestamp=void 0;t.formatChunkTimestamp=function(e,a){var t=1<e?1:0;return 0!==e?"".concat(e,"&nbsp;").concat({years:["year","years"],months:["month","months"]}[a][t]):""}},{}]},{},[7]);
//# sourceMappingURL=bundle.js.map
