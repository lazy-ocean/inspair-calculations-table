!function o(l,c,u){function i(t,e){if(!c[t]){if(!l[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(s)return s(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var n=c[t]={exports:{}};l[t][0].call(n.exports,function(e){return i(l[t][1][e]||e)},n,n.exports,o,l,c,u)}return c[t].exports}for(var s="function"==typeof require&&require,e=0;e<u.length;e++)i(u[e]);return i}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.calculate=function(r){for(var e=Object.keys(r).reduce(function(e,t){return e[t]=parseFloat(r[t]),e},{}),t=e.ProjectPrice,a=e.FiredEmployees,n=e.Robots,o=e.Performance,l=e.Shifts,c=e.WorkingDays,u=e.CostsPerPerson,i=e.Savings,s=[],f=1;f<=20;f++){var d=1+.05*(f-1),m={};m.year=f,m.maintenance=f%5==0?36e4:12e4,m.operational=5*n*.9*d*l*c*4.5*8*50,1===f?(m.salarySaved=a*u*d-u*(a/5),m.investments=t):(m.investments=0,m.salarySaved=a*u*d-u*(a/5)*d),m.performanceSaved=m.salarySaved*(o/100),m.otherSaved=i,1===f?(m.cashflowYear=m.salarySaved+m.performanceSaved+m.otherSaved-t-m.maintenance-m.operational,m.cashflow=m.cashflowYear):(m.cashflowYear=m.salarySaved+m.performanceSaved+m.otherSaved-m.maintenance-m.operational,m.cashflow=m.cashflowYear+s[f-2].cashflow),s.push(m)}return s},r.calculatePayback=function(e){var t,r=0,a=e.find(function(e){return 0<e.cashflow})||null;if(null===a)return"Проект не окупается";var n=0<(t=a.year-1)?e[t-1]:e[0],o=n.salarySaved,l=n.performanceSaved,c=n.otherSaved,u=n.maintenance,i=n.operational,s=n.investments,f=o+l+c,d=u+i,m=0<t?n.cashflow:-s;for(;m<0;)m+=(f-d)/12,r+=1;12===r&&(r=0,t+=1);return(0,p.plural)(t,r)};var p=e("../utils")},{"../utils":9}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=l(e("./schema")),n=l(e("./validate")),o=e("./calculate");function l(e){return e&&e.__esModule?e:{default:e}}var c={schema:a.default,validate:n.default,calculate:o.calculate,calculatePayback:o.calculatePayback};r.default=c},{"./calculate":1,"./schema":3,"./validate":4}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={ProjectPrice:{label:"Стоимость проекта, ₽",placeholder:0,type:"range",required:!0,min:1e6,max:5e7,value:84e5,step:1e3},FiredEmployees:{label:"Количество высвобождаемых работников, чел",placeholder:0,type:"range",min:1,max:20,required:!0,value:4},Robots:{label:"Количество роботов в проекте",placeholder:0,type:"range",min:1,max:5,required:!0,value:1},Performance:{label:"Ожидаемый прирост производительности, %",placeholder:0,type:"range",required:!0,min:0,max:100,value:0},Shifts:{label:"Количество смен в сутки (по 8 часов), шт.",placeholder:0,type:"range",required:!0,min:0,max:3,value:2},WorkingDays:{label:"Количество рабочих дней в неделю, шт.",placeholder:0,type:"range",required:!0,min:1,max:7,value:7},CostsPerPerson:{label:"Затраты на человека на линии в год (с учетом налогов), ₽/год",placeholder:0,type:"range",required:!0,min:42e4,max:15e5,value:561168,step:1e3},Savings:{label:"Дополнительная экономия (защитные костюмы, аттестации и пр.), ₽/год",placeholder:0,type:"range",required:!0,min:1e4,max:1e5,value:1e4,step:1e3}}},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=function(t){var r={};return Object.keys(t).forEach(function(e){schema[e].required&&!t[e]&&(r[e]="Пожалуйста, заполните поле")}),r}},{}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CLASSNAMES=void 0;r.CLASSNAMES={inputs:"form-field"}},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a,l=e("./constants"),d=e("./calculator"),m=(a=e("./table"))&&a.__esModule?a:{default:a};function c(e,t){if(null==e)return{};var r,a=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],0<=t.indexOf(r)||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),o=0;o<n.length;o++)r=n[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r]);return a}r.default=function(){function s(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}var f=document.querySelector(".form");Object.keys(d.schema).map(function(e){var t=d.schema[e],r=(t.initialValue,c(t,["initialValue"])),a=Object.keys(r).reduce(function(e,t){return e+"".concat(t,'="').concat(r[t],'"')},"")+'class="'.concat(l.CLASSNAMES.inputs,'" name="').concat(e,'"'),n=r.label,o=s('<label class="form--label" for="'.concat(e,'">').concat(n,"</label>"));return{item:e,element:s("<input ".concat(a," /><br />")),label:o,output:s('<output class="bubble bubble--'.concat(e,'"></output>')),scale:s('<div class="form--minmax"><span>'.concat(r.min.toLocaleString("ru"),"</span><span>").concat(r.max.toLocaleString("ru"),"</span></div>"))}}).forEach(function(e){f.append(s("<div class= 'form--item form--item-".concat(e.item,"'></div>")));var t=document.querySelector(".form--item-".concat(e.item));t.append(e.label),t.append(s("<div class= 'form--scale form--scale-".concat(e.item,"'></div>")));var r=document.querySelector(".form--scale-".concat(e.item));r.append(e.element),r.append(e.output),r.append(e.scale)});function a(e,t){var r=~~e.value,a=e.min,n=e.max,o=Number(100*(r-a)/(n-a));t.innerHTML=r.toLocaleString("ru"),t.style.left="calc(".concat(o,"% + (").concat(10-.15*o,"px))")}f.addEventListener("submit",function(e){e.preventDefault();var t,r,a,n,o,l,c,u=Array.from(f.elements).reduce(function(e,t){return"INPUT"===t.tagName&&(e[t.name]=t.value),e},{}),i=(0,d.validate)(u);Object.keys(i).length?console.log(i):(t=(0,d.calculate)(u),r=s('<section class="result">'.concat((0,m.default)(t),"</section>")),a=s('<p class="payback">'.concat((0,d.calculatePayback)(t),"</p>")),(n=document.getElementById("resultTable"))&&n.remove(),(o=document.getElementById("paybackText"))&&o.remove(),(l=document.body.querySelector(".container")).append(a),l.append(r),document.querySelector(".result"),c=document.querySelector(".information"),l.append(c),c.style.display="block",c.scrollIntoView())},!0),document.querySelectorAll(".form--item").forEach(function(e){var t=e.querySelector(".form-field"),r=e.querySelector(".bubble");t.addEventListener("input",function(){a(t,r)}),a(t,r)})}},{"./calculator":2,"./constants":5,"./table":8}],7:[function(e,t,r){"use strict";var a;(0,((a=e("./form"))&&a.__esModule?a:{default:a}).default)();var n=document.querySelector(".information--btn"),o=document.querySelector(".information--text");n.addEventListener("click",function(){o.classList.toggle("is-visible")})},{"./form":6}],8:[function(e,t,r){"use strict";function d(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw o}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=function(e){var t,r=['<table id="resultTable"><tr><th>Год</th><th>Ежегодный кэш-флоу,&nbsp;₽</th><th>Суммарный кэш-флоу,&nbsp;₽</th><th>Вложения,&nbsp;₽</th><th>Обслуживание,&nbsp;₽</th><th>Операционные расходы,&nbsp;₽</th><th>Экономия ФОТ,&nbsp;₽</th><th>Экономия от увеличения производительности,&nbsp;₽</th></tr>'],a=d(e);try{for(a.s();!(t=a.n()).done;){var n=t.value,o=n.year,l=n.investments,c=n.maintenance,u=n.operational,i=n.salarySaved,s=n.performanceSaved,f=[o,n.cashflowYear,n.cashflow,l,c,u,i,s].map(function(e){return"<td>".concat(e.toLocaleString("ru"),"</td>")}).join("");r.push("<tr>".concat(f,"</tr>"))}}catch(e){a.e(e)}finally{a.f()}return r.push("</table>"),r.join("")}},{}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.plural=void 0;r.plural=function(e,t){var r="Срок окупаемости&nbsp;– ",a=!(4<e%100&&e%100<=20)&&e%10<5?e%10-1:4;r+=0!==e?"".concat(e,"&nbsp;").concat(["год","года","года","года","лет"][a]," "):"";var n=!(4<t%100&&t%100<=20)&&t%10<5?t%10-1:4;return r+=0!==t?"".concat(t,"&nbsp;").concat(["месяц","месяца","месяца","месяца","месяцев"][n]):""}},{}]},{},[7]);
//# sourceMappingURL=bundle.js.map
