!function l(o,c,u){function i(t,e){if(!c[t]){if(!o[t]){var a="function"==typeof require&&require;if(!e&&a)return a(t,!0);if(s)return s(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var n=c[t]={exports:{}};o[t][0].call(n.exports,function(e){return i(o[t][1][e]||e)},n,n.exports,l,o,c,u)}return c[t].exports}for(var s="function"==typeof require&&require,e=0;e<u.length;e++)i(u[e]);return i}({1:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.calculate=function(a){for(var e=Object.keys(a).reduce(function(e,t){return e[t]=parseFloat(a[t]),e},{}),t=e.ProjectPrice,r=e.FiredEmployees,n=e.Robots,l=e.Performance,o=e.Shifts,c=e.WorkingDays,u=e.CostsPerPerson,i=e.Savings,s=[],d=1;d<=20;d++){var f=1+.05*(d-1),p={};p.year=d,p.maintenance=d%5==0?36e4:12e4,p.operational=5*n*.9*f*o*c*4.5*8*50,1===d?(p.salarySaved=r*u*f-u*(r/5),p.investments=t):(p.investments=0,p.salarySaved=r*u*f-u*(r/5)*f),p.performanceSaved=p.salarySaved*(l/100),p.otherSaved=i,1===d?(p.cashflowYear=p.salarySaved+p.performanceSaved+p.otherSaved-t-p.maintenance-p.operational,p.cashflow=p.cashflowYear):(p.cashflowYear=p.salarySaved+p.performanceSaved+p.otherSaved-p.maintenance-p.operational,p.cashflow=p.cashflowYear+s[d-2].cashflow),s.push(p)}return s},a.calculatePayback=function(e){var t,a=0,r=e.find(function(e){return 0<e.cashflow})||null;if(null===r)return null;var n=0<(t=r.year-1)?e[t-1]:e[0],l=n.salarySaved,o=n.performanceSaved,c=n.otherSaved,u=n.maintenance,i=n.operational,s=n.investments,d=l+o+c,f=u+i,p=0<t?n.cashflow:-s;for(;p<0;)p+=(d-f)/12,a+=1;12===a&&(a=0,t+=1);return{paybackYears:t,paybackMonths:a}};e("../utils")},{"../utils":9}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=o(e("./schema")),n=o(e("./validate")),l=e("./calculate");function o(e){return e&&e.__esModule?e:{default:e}}var c={schema:r.default,validate:n.default,calculate:l.calculate,calculatePayback:l.calculatePayback};a.default=c},{"./calculate":1,"./schema":3,"./validate":4}],3:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;a.default={ProjectPrice:{label:"Стоимость проекта,&nbsp₽",placeholder:0,type:"range",required:!0,min:1e6,max:5e7,value:84e5,step:1e3},FiredEmployees:{label:"Количество высвобождаемых работников,&nbspчел",placeholder:0,type:"range",min:1,max:20,required:!0,value:4},Robots:{label:"Количество роботов в проекте",placeholder:0,type:"range",min:1,max:5,required:!0,value:1},Performance:{label:"Ожидаемый прирост производительности,&nbsp%",placeholder:0,type:"range",required:!0,min:0,max:100,value:0},Shifts:{label:"Количество смен в сутки (по 8 часов),&nbspшт.",placeholder:0,type:"range",required:!0,min:0,max:3,value:2},WorkingDays:{label:"Количество рабочих дней в неделю,&nbspшт.",placeholder:0,type:"range",required:!0,min:1,max:7,value:7},CostsPerPerson:{label:"Затраты на человека на линии в год (с учетом налогов),&nbsp₽/год",placeholder:0,type:"range",required:!0,min:42e4,max:15e5,value:561168,step:1e3},Savings:{label:"Дополнительная экономия (защитные костюмы, аттестации и пр.),&nbsp₽/год",placeholder:0,type:"range",required:!0,min:1e4,max:1e5,value:1e4,step:1e3}}},{}],4:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r,n=(r=e("./schema"))&&r.__esModule?r:{default:r};a.default=function(t){var a={};return Object.keys(t).forEach(function(e){n.default[e].required&&!t[e]&&(a[e]="Пожалуйста, заполните поле")}),a}},{"./schema":3}],5:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.CLASSNAMES=void 0;a.CLASSNAMES={inputs:"form__field"}},{}],6:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=e("./constants"),r=n(e("./calculator")),p=n(e("./table")),m=e("./utils");function n(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(null==e)return{};var a,r=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],0<=t.indexOf(a)||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),l=0;l<n.length;l++)a=n[l],0<=t.indexOf(a)||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a]);return r}var u=r.default.schema,v=r.default.validate,b=r.default.calculate,y=r.default.calculatePayback;a.default=function(){function d(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}var f=document.querySelector(".form");Object.keys(u).map(function(e){var t=u[e],a=(t.initialValue,c(t,["initialValue"])),r=Object.keys(a).reduce(function(e,t){return e+"".concat(t,'="').concat(a[t],'"')},"")+'class="'.concat(o.CLASSNAMES.inputs,'" name="').concat(e,'"'),n=a.label,l=d('<label class="form__label" for="'.concat(e,'">').concat(n,"</label>"));return{item:e,element:d("<input ".concat(r," /><br />")),label:l,output:d('<output class="form__bubble form__bubble--'.concat(e,'"></output>')),scale:d('<div class="form__minmax"><span>'.concat(a.min.toLocaleString("ru"),"</span><span>").concat(a.max.toLocaleString("ru"),"</span></div>"))}}).forEach(function(e){f.append(d("<div class= 'form__item form__item--".concat(e.item,"'></div>")));var t=document.querySelector(".form__item--".concat(e.item));t.append(e.label),t.append(d("<div class= 'form__scale form__scale--".concat(e.item,"'></div>")));var a=document.querySelector(".form__scale--".concat(e.item));a.append(e.element),a.append(e.output),a.append(e.scale)});function r(e,t){var a=~~e.value,r=e.min,n=e.max,l=Number(100*(a-r)/(n-r));t.innerHTML=a.toLocaleString("ru"),t.style.left="calc(".concat(l,"% + (").concat(10-.15*l,"px))")}f.addEventListener("submit",function(e){e.preventDefault();var t,a,r,n,l,o,c,u,i=Array.from(f.elements).reduce(function(e,t){return"INPUT"===t.tagName&&(e[t.name]=t.value),e},{}),s=v(i);Object.keys(s).length?console.log(s):(t=b(i),a=y(t),console.log(a),r=d('<p class="payback">'.concat(a?(0,m.plural)(a.paybackYears,a.paybackMonths):"Проект не окупается","</p>")),n=d('<section class="result">'.concat((0,p.default)(t,null==a?void 0:a.paybackYears),"</section>")),(l=document.querySelector(".result"))&&l.remove(),(o=document.querySelector(".payback"))&&o.remove(),(c=document.body.querySelector(".container")).append(r),c.append(n),document.querySelector(".result"),u=document.querySelector(".information"),c.append(u),u.classList.add("is-visible"),r.scrollIntoView())},!0),document.querySelectorAll(".form__item").forEach(function(e){var t=e.querySelector(".form__field"),a=e.querySelector(".form__bubble");t.addEventListener("input",function(){r(t,a)}),r(t,a)})}},{"./calculator":2,"./constants":5,"./table":8,"./utils":9}],7:[function(e,t,a){"use strict";var r;(0,((r=e("./form"))&&r.__esModule?r:{default:r}).default)();var n=document.querySelector(".information__btn"),l=document.querySelector(".information__text");n.addEventListener("click",function(){l.classList.toggle("is-visible")})},{"./form":6}],8:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;a.default=function(e,t){for(var a=['<table id="resultTable"><tr><th>Год</th><th>Ежегодный кэш-флоу,&nbsp;₽</th><th>Суммарный кэш-флоу,&nbsp;₽</th><th>Вложения,&nbsp;₽</th><th>Обслуживание,&nbsp;₽</th><th>Операционные расходы,&nbsp;₽</th><th>Экономия ФОТ,&nbsp;₽</th><th>Экономия от увеличения производительности,&nbsp;₽</th></tr>'],r=0;r<e.length;r++){var n=e[r],l=n.year,o=n.investments,c=n.maintenance,u=n.operational,i=n.salarySaved,s=n.performanceSaved,d=[l,n.cashflowYear,n.cashflow,o,c,u,i,s].map(function(e){return"<td>".concat(e.toLocaleString("ru"),"</td>")}).join("");a.push("<tr class=".concat(r===t?"isHighlighted":"",">").concat(d,"</tr>"))}return a.push("</table>"),a.join("")}},{}],9:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.plural=void 0;a.plural=function(e,t){var a="Срок окупаемости&nbsp;– ",r=!(4<e%100&&e%100<=20)&&e%10<5?e%10-1:4;a+=0!==e?"".concat(e,"&nbsp;").concat(["год","года","года","года","лет"][r]," "):"";var n=!(4<t%100&&t%100<=20)&&t%10<5?t%10-1:4;return a+=0!==t?"".concat(t,"&nbsp;").concat(["месяц","месяца","месяца","месяца","месяцев"][n]):""}},{}]},{},[7]);
//# sourceMappingURL=bundle.js.map
